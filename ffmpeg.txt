#
# ffmpeg command template
#
# Replacements:
# $FFMPEG$ - path to ffmpeg
# $AUDIO$ - path to audio file
# $INPUT$ - path to background image file or sequence of images
# $INPUT_OVERLAY$ - path to overlay image file or sequence of images
# $INPUT_DURATION$ - input duration in seconds
# $INPUT_FRAMES$ - number of input frames
# $INPUT_RATE$ - input stream framerate
# $OUTPUT$ - path to output file
# $KEY_FRAMES$ - cue points list
#
# remember that all lines are concatenated to ONE long command line
#
$FFMPEG$
-loglevel error

# background image, looped forever
-f image2
-r $INPUT_RATE$
-loop 1
-i $INPUT$

# overlays
-f image2
-r $INPUT_RATE$
-i $INPUT_OVERLAY$

# Video filter here: overlay
-filter_complex "
[0:v][1:v] overlay=0:0 [out]
"

# output options
-q:v:0 3
-c:v:0 mpeg4
# -g:v:0 5
-aspect:v:0 16:9
-t:v:0 $INPUT_DURATION$
# 0.5 fps
-r:v:0 1/2
-force_key_frames:v:0 $KEY_FRAMES$

# one thread please
-threads:v:0 1
# overwrite output
-y

-map "[out]"
$OUTPUT$
